DROP TABLE ShopProductOrderDetails;
DROP TABLE ShopShoppingCart;
DROP TABLE ShopUsers;
DROP TABLE ShopProducts;

CREATE TABLE ShopUsers 
(
    USER_ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    FIRST_NAME VARCHAR2(100) NOT NULL UNIQUE,
    LAST_NAME VARCHAR2(100) NOT NULL UNIQUE
);
CREATE TABLE ShopShoppingCart 
(
    SHOPPING_CART_ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    ORDER_DATE VARCHAR2(100),
    SHIPPING_ADDRESS VARCHAR2(100),
    USER_ID NUMBER,
    Constraint U_ID FOREIGN KEY (USER_ID) REFERENCES ShopUsers(USER_ID)
);
CREATE TABLE ShopProducts 
(
    PRODUCT_ID NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    PRODUCT_NAME VARCHAR2(100) NOT NULL UNIQUE,
    PRODUCT_PRICE NUMBER,
    STOCK_AMOUNT NUMBER
);
CREATE TABLE ShopProductOrderDetails 
(
    PRODUCT_ID NUMBER,
    SHOPPING_CART_ID NUMBER,
    QUANTITY NUMBER,
    Constraint pod_pk PRIMARY KEY (PRODUCT_ID, SHOPPING_CART_ID),
    Constraint prd_id FOREIGN KEY (PRODUCT_ID) REFERENCES ShopProducts(PRODUCT_ID),
    Constraint shp_id FOREIGN KEY (SHOPPING_CART_ID)  REFERENCES ShopShoppingCart(SHOPPING_CART_ID)
);